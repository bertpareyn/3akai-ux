<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/profile.css" />

<div id="profile-widget">
    <!-- TAB NAVIGATION -->
    <ul class="nav nav-tabs">
        <li class="active">
            <a href="#profile-profile-container" data-toggle="tab">__MSG__PROFILE__</a>
        </li>
        <li>
            <a href="#profile-publications-container" data-toggle="tab">__MSG__PUBLICATIONS__</a>
        </li>
    </ul>

    <!-- TAB CONTENT -->
    <div class="tab-content">
        <div class="tab-pane active" id="profile-profile-container">__MSG__PROFILE__</div>
        <div class="tab-pane" id="profile-publications-container">__MSG__PUBLICATIONS__</div>
    </div>
</div>

<div id="profile-profile-template"><!--
    <div class="row">
        <div id="profile-user-thumbnail" class="col-xs-12 col-md-3">
            ${renderThumbnail(userProfile, false, true, false)}
            {if userProfile.following && userProfile.following.canFollow}
                <button id="profile-follow" type="button" class="btn">__MSG__FOLLOW__</button>
            {/if}
        </div>
        <div class="col-xs-12 col-md-9">
            <h1 id="profile-user-displayname">${userProfile.displayName}</h1>
            <h2 id="profile-user-tenant" class="muted">${userProfile.tenant.displayName}</h2>

            <div id="profile-user-bio">
                <p>Lorem ipsum dolor sit amet, consectetur adipisici elit, sed eiusmod tempor incidunt ut labore et dolore magna aliqua. Praeterea iter est quasdam res quas ex communi. Paullum deliquit, ponderibus modulisque suis ratio utitur. Excepteur sint obcaecat cupiditat non proident culpa.</p>
                <p>Hi omnes lingua, institutis, legibus inter se differunt. Excepteur sint obcaecat cupiditat non proident culpa. Excepteur sint obcaecat cupidit</p>
                <p>at non proident culpa. Ut enim ad minim veniam, quis nostrud exercitation. Phasellus laoreet lorem vel dolor tempus vehicula.</p>
            </div>

            <div class="oae-list-container">
                <ul class="oae-list oae-list-grid">
                    {for content in featuredContent}
                        ${listItem(content, null, false)}
                    {/for}
                </ul>
            </div>
        </div>
    </div>
--></div>

<div id="profile-publications-template"><!--
    {for block in publications}
        {var year = block[0]}
        {var blockPublications = block[1]}
        <div class="publication-block">
            <div class="publication-year">
                <h3>${year}</h3>
            </div>
            
            <div class="profile-publications">
                {for publication in blockPublications}
                    <div class="profile-publication">
                        <div class="profile-publication-main">
                            <div class="profile-publication-icon">
                                <div class="profile-publication-status"><i class="icon-cogs"></i><span class="profile-publication-icon-desc"> In press</span></div>
                            </div>

                            <div class="profile-publication-type muted">${publication.publicationType}</div>
                            <h4 class="profile-publication-title">
                                <a href="/some/where/${publication.id}" title="${publication.displayName}">${publication.displayName}</a>
                            </h4>
                            <div class="profile-publication-source muted">
                                ${publication.publisher}
                                {if publication.issueNumber || publication.pageBegin || publication.pageEnd}
                                    {if publication.publisher} | {/if}
                                    ${publication.issueNumber || '?'}: ${publication.pageBegin || '?'} - ${publication.pageEnd || '?'}
                                {/if}
                            </div>
                        </div>

                        <div class="profile-publication-authors">
                            <p class="muted">Authors&nbsp;<span class="profile-publication-author-count">${publication.authors.length}</span></p>
                            <ul class="profile-publication-author-list">
                            {for author in publication.authors}
                                {if _.isString(author)}
                                    <li>${author}</li>
                                {else}
                                    <li><a href="${author.profilePath}">${author.displayName}</a></li>
                                {/if}
                            {/for}
                            </ul>
                        </div>
                    </div>
                {/for}
            </div>
        </div>
    {/for}
--></div>

<!-- 

    {for publication in publications}
        {var currYear = (new Date(publication.date)).getFullYear()}
        {if currYear !== prevYear}
            {if prevYear}
                </ul></div>
            {/if}
            <h1>${currYear}</h1>
                <div class="oae-list-container">
                    <ul class="oae-list oae-list-details">
        {/if}

        <li class="clearfix">
            <div class="oae-listitem">
                <div class="oae-thumbnail icon-oae-file icon-oae-content" data-id="${publication.id}">
                    <a href="/content/cam/gyzjuGNSU" title="${publication.displayName}">
                        <div role="img" aria-label="${publication.displayName}" style="background: url(${publication.thumbnailUri})"></div>
                    </a>
                </div>
                <div class="oae-tile-metadata">
                    <i class="icon-cogs pull-left"></i>
                    <h3 class="oae-threedots">In press</h3>
                </div>
                <div class="profile-publications-publication row">
                    <div class="upper">
                        <div class="col-md-8">
                            <h3 class="oae-threedots">
                                <a href="/some/where/${publication.id}" title="${publication.displayName}">${publication.displayName}</a>
                            </h3>
                            <span class="oae-threedots muted">${publication.publicationType}</span>
                        </div>
                        <div class="authors col-md-4">
                            <div class="author-count oae-threedots">
                                {if publication.authors.count === 1}
                                    <span class="muted">1</span> Author
                                {else}
                                    <span class="muted">${publication.authors.count}</span> Co-authors
                                {/if}
                            </div>
                            <div class="author-thumbnails oae-threedots">
                                <span class="internal-authors">
                                {for author in publication.authors.internal}
                                    <a href="${author.profilePath}" title="${author.displayName}">
                                        <img src="${author.picture.small}" alt="${author.displayName}"/>
                                    </a>
                                {/for}
                                </span>

                                {if publication.authors.internal && publication.authors.external}
                                <small>&amp;</small>
                                {/if}

                                <span class="external-authors">
                                {for author in publication.authors.external}
                                    <span>${author}</span>{if author_index != __LIST__author.length - 1}, {/if}
                                {/for}
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="oae-threedots col-md-12">
                        ${publication.publisher}
                        {if publication.issueNumber || publication.pageBegin || publication.pageEnd}
                            {if publication.publisher} | {/if}
                            ${publication.issueNumber || '?'}: ${publication.pageBegin || '?'} - ${publication.pageEnd || '?'}
                        {/if}
                    </div>
                </div>
            </div>
        </li>
        {var prevYear = currYear}
    {/for}
-->

<div id="profile-publdications-template"><!--
    <h1>2013</h1>
    <div class="oae-list-container">
        <ul class="oae-list oae-list-details">
            {for publication in publications}
                <li class="clearfix">
                    <div class="oae-listitem">
                        <div class="oae-thumbnail icon-oae-file icon-oae-content" data-id="${publication.id}">
                            <a href="/content/cam/gyzjuGNSU" title="${publication.displayName}">
                                <div role="img" aria-label="${publication.displayName}" style="background: url(${publication.thumbnailUri})"></div>
                            </a>
                        </div>
                        <div class="oae-tile-metadata">
                            <i class="icon-cogs pull-left"></i>
                            <h3 class="oae-threedots">In press</h3>
                        </div>
                        <div class="profile-publications-publication row">
                            <div class="col-md-12">
                                <h3 class="oae-threedots">
                                    <a href="/content/cam/gyzjuGNSU" title="${publication.displayName}">${publication.displayName}</a>
                                </h3>
                                <span class="oae-threedots muted">${publication.publicationType}</span>
                            </div>
                            <div class="oae-threedots col-md-12">
                                ${publication.publisher} (${(new Date(publication.date)).getFullYear()})
                            </div>
                        </div>
                    </div>
                </li>
            {/for}
        </ul>
    </div>
--></div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="js/profile.js"></script>
