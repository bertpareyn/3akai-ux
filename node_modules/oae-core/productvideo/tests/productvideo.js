casper.test.comment('Widget - Product video');

/**
 * Verify opening the product video modal with assertions
 */
var verifyOpenProductModal = function() {
    casper.waitForSelector('.oae-trigger-productvideo', function() {
        casper.test.assertExists('.oae-trigger-productvideo', 'Product video trigger exists');
        casper.click('.oae-trigger-productvideo');
        casper.wait(1000, function() {
            casper.test.assertVisible('#productvideo-modal', 'Product video pane is showing after trigger');
        });
    });
};

/**
 * Verify that all elements are present in the product video modal
 */
var verifyProductModalElements = function() {
    // Verify that the product video is showing
    casper.test.assertExists('#productvideo-modal iframe', 'The product video is present');
};

casper.start('http://test.oae.com', function() {
    casper.then(function() {
        casper.echo('Verify product video modal', 'INFO');
        verifyOpenProductModal();
    });

    casper.then(function() {
        casper.echo('Verify product video elements', 'INFO');
        verifyProductModalElements();
    });
});

casper.run(function() {
    this.test.done();
});
